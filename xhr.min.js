var Xhr=function(){var e=function(e,t,n,r,i){var s=Promise(),o;e:{for(var u=void 0,u=0;4>u;u++)try{o=u?new ActiveXObject([,"Msxml2","Msxml3","Microsoft"][u]+".XMLHTTP"):new XMLHttpRequest;break e}catch(a){}o=void 0}var f;n=n||{};if("string"===typeof n)f=n;else{var u=encodeURIComponent,l="";for(f in n)l="&"+u(f)+"="+u(n[f]);f=l.substr(1)}"GET"===e&&f&&(t+="?"+f,f=null);o.open(e,t,!0);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var c in r||{})o.setRequestHeader(c,r[c]);o.onreadystatechange=function(){if(4===o.readyState){var e=i?o.responseText:JSON.parse(o.responseText);(200===o.status?s.resolve:s.reject)(e,o.status)}};o.send(f);s.abort=o.abort;return s};return function(){var t=!1;this.json=function(){t=!1;return this};this.text=function(){t=!0;return this};this.get=function(n,r,i){return e("GET",n,r,i,t)};this.post=function(n,r,i){return e("POST",n,r,i,t)};this.put=function(n,r,i){return e("PUT",n,r,i,t)};this.delete=function(n,r,i){return e("DELETE",n,r,i,t)};this.spoof=function(e,t){return Promise().resolve(e,t||200)}}}()
